'use strict';

let connectBtn = $('[data-action="sw.client.connect"]'),
  disconnectBtn = $('[data-action="sw.client.disconnect"]'),
  connect = function(jqEvent) {
    if (jqEvent) jqEvent.preventDefault();

    sw.display.setMainTitle('Connecting to SoundCloud....');
    sw.display.setSubTitle('Authenticating...');

    sw.client.connect();
  },
  disconnect = function(jqEvent) {
    if (jqEvent) jqEvent.preventDefault();

    sw.client.disconnect();
  };

module.exports = {
  register: function() {
    if (sw.getOption('flags').AUTO_CONNECT === true) {
      connect(null);
    }

    if (connectBtn.length === 0) {
      return false;
    }
    connectBtn.on('click', connect);
    disconnectBtn.on('click', disconnect);
    return true;
  },
  unregister: function() {
    if (connectBtn.length === 0) {
      return false;
    }
    connectBtn.off('click', connect);
    disconnectBtn.off('click', disconnect);
    return true;
  }
};
